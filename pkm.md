# ポケモンのデータ構造(第1世代)

オフセットはすべて10進数です。また複数バイトあるものは、基本的に**ビッグエンディアン**です。

## 💻 ボックス内のポケモン

全部で33バイトです。

Offset | Contents | Size(Byte)
--  | -- | --
  0 | ポケモンID | 1
  1 | 現在のHP | 2
  3 | レベル | 1
  4 | 状態異常 | 1
  5 | タイプ1 | 1
  6 | タイプ2 | 1
  7 | 捕捉率 | 1
  8 | わざID1 | 1
  9 | わざID2 | 1
 10 | わざID3 | 1
 11 | わざID4 | 1
 12 | おやID | 2
 14 | 累計経験値 | 3
 17 | HP努力値 | 2
 19 | こうげき努力値 | 2
 21 | ぼうぎょ努力値 | 2
 23 | すばやさ努力値 | 2
 25 | とくしゅ努力値 | 2
 27 | 個体値 | 2
 29 | わざ1 PP | 1
 30 | わざ2 PP | 1
 31 | わざ3 PP | 1
 32 | わざ4 PP | 1

## 🎒 手持ちのポケモン

全部で44バイトです。

オフセット `0..32` まではボックスと同じデータ内容です。

Offset | Contents | Size(Byte)
--  | -- | --
33 | 手持ち時のレベル | 1
34 | 最大HP | 2
36 | こうげき | 2
38 | ぼうぎょ | 2
40 | すばやさ | 2
42 | とくこう | 2

### ポケモンID

[こちら](./data/specie.md)を参照してください。

### タイプ1,2

ポケモンの[タイプID](./data/type.md)が格納されています。単タイプの場合は、タイプ1,2とも同じ値になります。

### わざID

[こちら](./data/move.md)を参照してください。

### 状態異常

```
  Bit 3:  ねむり
  Bit 4:  どく
  Bit 5:  やけど
  Bit 6:  こおり
  Bit 7:  まひ
```

「もうどく」は戦闘中の一時的な状態なので、ここには通常の「どく」としてしか格納されません。同じ理由で「こんらん」もここに格納されることはありません。

`0x00`は、そのポケモンが何の状態異常にもかかっていないことを意味しています。

### 個体値

個体値は 0..15 (つまり4bit) です。

```
A = aaaa: こうげき個体値 (0..15)
B = bbbb: ぼうぎょ個体値 (0..15)
S = ssss: すばやさ個体値 (0..15)
C = cccc: とくしゅ個体値 (0..15, Gen1は特攻特防の個体値は同じです)

Offset: 21       22
        aaaabbbb sssscccc
```

HPの個体値は

```go
  HP = ((A & 0b1) * 8) + ((B & 0b1) * 4) + ((S & 0b1) * 2) + ((C & 0b1) * 1)
```

で計算されます。

### PP

各わざのPPです。それぞれの値の下位6bitがその技の現在のPP量で、上位2bitがその技に適用されたポイントアップの数(0~3)です。

例えば、『ふぶき』にポイントアップを2回(`0b10`)適用した場合は、PPが7(`0b000111`)となり PPのバイトは `0x87(0b10000111)`となります。

### 捕捉率/持ち物

そのポケモンの捕捉率で、ポケモンを入手したときに設定されます。そのポケモンが進化したときに捕捉率が変わったとしてもこの値は変わらないことに注意してください。

Gen2との交換では、この欄はポケモンの持ち物を保存する用途でも利用されます。Gen2からGen1に交換する際にもアイテムは保持されますが、Gen1の捕捉率にはGen2で対応するアイテムがないものがあります。このような場合、Gen2に送られる際に別の値で置き換えられます。

ピカチュウ版では2匹のポケモンだけ、この値がポケモンの捕捉率とは別の値に設定されています。
最初に貰えるピカチュウは、入手時にこの値が`163`（ピカチュウの捕捉率は`190`）になっており、交換すると「でんきだま」を持っています。もう1匹は野生のユンゲラーで、捕獲時の値が`96`（補足率は`100`）に設定されており、交換すると「ねじれたスプーン」を持っています。

`0`は持ち物を持っていないことを表します。

以下の捕捉率は、Gen2における不正アイテム（基本的に`カビチュウ`）に対応し、交換時に次のアイテムに変換されます。

Old | | New
--- | -- | ---
 25(カビチュウ) | → | 146(たべのこし)
 45(カビチュウ) | → | 83(にがいきのみ)
 50(カビチュウ) | → | 174(おうごんのみ)
 90(カビチュウ) | → | 173(きのみ)
100(カビチュウ) | → | 173(きのみ)
120(カビチュウ) | → | 173(きのみ)
127(カードキー) | → | 173(きのみ)
190(カビチュウ) | → | 173(きのみ)
255(終端記号) | → | 173(きのみ)

### ニックネーム、親名

ニックネームと親名はこのデータ構造とは別の場所に格納されています。

## 📎 外部リンク

- [Pokémon data structure (Generation I)](https://bulbapedia.bulbagarden.net/wiki/Pok%C3%A9mon_data_structure_(Generation_I))
